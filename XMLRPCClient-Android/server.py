
from xmlrpc.server import SimpleXMLRPCServer 
import datetime, socket,  random, array

#xmlrpclib,

# Create server
server = SimpleXMLRPCServer(("localhost", 8888),allow_none=True)

# Register an instance; all the methods of the instance are 
# published as XML-RPC methods
class MyFuncs:
	def add(self, x, y): 
		return x + y
	def addOneDay(self, now):
		now = datetime.datetime.strptime(str(now), "%Y%m%dT%H:%M:%S")
		return now + datetime.timedelta(1)
	def getHostName(self, android):
		host = socket.gethostname()
		return "android: " + android + "\nhost: " + host
	def testStruct(self, inMap):
		city = inMap["City"]
		map = {"City": city, "Temperature": 24}
		return map
	def testArray(self, inArray):
		sum = 0
		for i in inArray:
			sum += i
		return [sum, len(inArray)]
	def exibe(self, x, y):
		print ("Nome: " + x +"\nData do Nascimento:" + y)
		return 0
##	def desaturateImage(self, img):
##		arr = array.array('I', img.data)
##		i = 0
##		for c in arr:
##			b = c & 255
##			c >>= 8
##			g = c & 255
##			c >>= 8
##			r = c & 255
##			c >>= 8
##			a = c & 255
##			grey = (r + g +b) / 3
##			c = a
##			c <<= 8
##			c += grey
##			c <<= 8
##			c += grey
##			c <<= 8
##			c += grey
##			arr[i] = c
##			i += 1
##		return  xmlrpclib.Binary(arr.tostring())
	def invertBoolean(self, b):
		return not b
	def getHugeString(self):
		return "x" * 1024 * 64
	def get2DArray(self):
		arr = []
		arr.append([1,2,3])
		arr.append([4,5,6])
		arr.append([{"x": 1, "y":0, "z":0},8,9])
		return arr

    
server.register_instance(MyFuncs())

# Run the server's main loop
server.serve_forever()
